{"head":{"description":"Setting up your first PIE To start creating a PIE, the first step is to create a directory and initialize the project. For the purposes of…"},"body":"<h2 id=\"setting-up-your-first-pie\"><a href=\"#setting-up-your-first-pie\" class=\"phenomic-HeadingAnchor\">#</a>Setting up your first PIE</h2>\n<p>To start creating a PIE, the first step is to create a directory and initialize the project. For the purposes of this explanation, we'll be developing a simple toggle with a value of either <code>true</code> or <code>false</code>.</p>\n<pre><code class=\"hljs language-bash\">    mkdir pie-toggle\n    <span class=\"hljs-built_in\">cd</span> pie-toggle\n    npm init</code></pre>\n<p>Using the interactive <code>npm</code> command, set the name of the interaction to <code>pie-toggle</code>, and set the \"entry point\" to <code>src/index.js</code>. Afterwards, there should be a <code>package.json</code> file in the directory which looks like this:</p>\n<pre><code class=\"hljs language-json\">    {\n      <span class=\"hljs-attr\">\"name\"</span>: <span class=\"hljs-string\">\"pie-toggle\"</span>,\n      <span class=\"hljs-attr\">\"version\"</span>: <span class=\"hljs-string\">\"1.0.0\"</span>,\n      <span class=\"hljs-attr\">\"description\"</span>: <span class=\"hljs-string\">\"\"</span>,\n      <span class=\"hljs-attr\">\"main\"</span>: <span class=\"hljs-string\">\"src/index.js\"</span>,\n      <span class=\"hljs-attr\">\"scripts\"</span>: {\n        <span class=\"hljs-attr\">\"test\"</span>: <span class=\"hljs-string\">\"echo \\\"Error: no test specified\\\" &#x26;&#x26; exit 1\"</span>\n      },\n      <span class=\"hljs-attr\">\"author\"</span>: <span class=\"hljs-string\">\"\"</span>,\n      <span class=\"hljs-attr\">\"license\"</span>: <span class=\"hljs-string\">\"ISC\"</span>\n    }</code></pre>\n<p>It would also be useful to set up a README at this point:</p>\n<pre><code class=\"hljs language-bash\">    touch README.md</code></pre>\n<p><a href=\"https://github.com/PieLabs/pie-toggle/releases/tag/step-1\">See the code here</a></p>\n<h3 id=\"creating-a-custom-element\"><a href=\"#creating-a-custom-element\" class=\"phenomic-HeadingAnchor\">#</a>Creating a Custom Element</h3>\n<p>To get started, we'll need to create a definition for our PIE <a href=\"https://developers.google.com/web/fundamentals/getting-started/primers/customelements\">custom element</a> in a <code>src</code> directory:</p>\n<pre><code class=\"hljs language-bash\">    mkdir src\n    <span class=\"hljs-built_in\">cd</span> src\n    touch index.js</code></pre>\n<p>Fill out this file with the following code:</p>\n<pre><code class=\"hljs language-javascript\">    <span class=\"hljs-keyword\">export</span> <span class=\"hljs-keyword\">default</span> <span class=\"hljs-class\"><span class=\"hljs-keyword\">class</span> <span class=\"hljs-title\">Toggle</span> <span class=\"hljs-keyword\">extends</span> <span class=\"hljs-title\">HTMLElement</span> </span>{\n      \n      <span class=\"hljs-keyword\">constructor</span>() {\n        <span class=\"hljs-keyword\">super</span>();\n        <span class=\"hljs-keyword\">this</span>.innerHTML = <span class=\"hljs-string\">`&#x3C;div> hello, world &#x3C;/div>`</span>;\n      }\n\n    }</code></pre>\n<p>This defines a simple web component with the content 'hello, world'.</p>\n<p><a href=\"https://github.com/PieLabs/pie-toggle/releases/tag/step-2\">See the code here</a></p>\n<h3 id=\"setting-up-demo-code\"><a href=\"#setting-up-demo-code\" class=\"phenomic-HeadingAnchor\">#</a>Setting up demo code</h3>\n<p>Now that we've got some markup in our PIE, we'll need to define an item so that we can see it in action. For a  PIE, this is performed by adding data and markup to the demo. You'll want to create a <code>docs/demo</code> directory, and add to it a <code>config.json</code> file as well as an <code>index.html</code> file:</p>\n<pre><code class=\"hljs language-bash\">    mkdir -p docs/demo\n    <span class=\"hljs-built_in\">cd</span> docs/demo\n    touch index.html\n    touch config.json</code></pre>\n<p>At this point, your project structure should look like this:</p>\n<pre><code class=\"hljs language-bash\">    .\n    ├── docs\n    │   └── demo\n    │       ├── config.json\n    │       └── index.html\n    ├── package.json\n    └── src\n        └── index.js</code></pre>\n<p>In the <code>config.json</code> file, we'll need to define the configuration data to set up the PIE:</p>\n<pre><code class=\"hljs language-json\">    {\n      <span class=\"hljs-attr\">\"elements\"</span>: {\n        <span class=\"hljs-attr\">\"pie-toggle\"</span>: <span class=\"hljs-string\">\"../..\"</span>\n      },\n      <span class=\"hljs-attr\">\"models\"</span>: [\n        {\n          <span class=\"hljs-attr\">\"id\"</span>: <span class=\"hljs-string\">\"1\"</span>,\n          <span class=\"hljs-attr\">\"element\"</span>: <span class=\"hljs-string\">\"pie-toggle\"</span>\n        }\n      ]\n    }</code></pre>\n<p>The <code>elements</code> field tells <code>pie</code> where to find the source for a given element using its name. Note that you may also use NPM-style locations for this property as well. The <code>models</code> property defines the content of the various PIE instances to be rendered. At the moment, we're just setting a PIE referenced by <code>id=1</code> to be defined as a <code>pie-toggle</code>.</p>\n<p>Once the PIE is configured in the JSON, we'll need to define the markup for rendering it in the <code>index.html</code> file:</p>\n<pre><code class=\"hljs language-html\">    <span class=\"hljs-tag\">&#x3C;<span class=\"hljs-name\">style</span> <span class=\"hljs-attr\">type</span>=<span class=\"hljs-string\">\"text/css\"</span>></span><span class=\"css\">\n      <span class=\"hljs-selector-class\">.body</span> {\n        <span class=\"hljs-attribute\">width</span>: <span class=\"hljs-number\">900px</span>;\n        <span class=\"hljs-attribute\">margin</span>: <span class=\"hljs-number\">0</span> auto;\n      }\n    </span><span class=\"hljs-tag\">&#x3C;/<span class=\"hljs-name\">style</span>></span>\n\n    <span class=\"hljs-tag\">&#x3C;<span class=\"hljs-name\">div</span> <span class=\"hljs-attr\">class</span>=<span class=\"hljs-string\">\"body\"</span>></span>\n      <span class=\"hljs-tag\">&#x3C;<span class=\"hljs-name\">pie-toggle</span> <span class=\"hljs-attr\">pie-id</span>=<span class=\"hljs-string\">\"1\"</span>></span><span class=\"hljs-tag\">&#x3C;/<span class=\"hljs-name\">pie-toggle</span>></span>\n    <span class=\"hljs-tag\">&#x3C;/<span class=\"hljs-name\">div</span>></span></code></pre>\n<p>Once this is done, we have the base setup for our PIE.</p>\n<p><a href=\"https://github.com/PieLabs/pie-toggle/releases/tag/step-3\">See the code here</a></p>\n<h3 id=\"running-the-demo\"><a href=\"#running-the-demo\" class=\"phenomic-HeadingAnchor\">#</a>Running the demo</h3>\n<p>In order to display our configured PIE in a browser, run the <code>serve</code> task from the <code>docs/demo</code> directory of the project:</p>\n<pre><code>pie serve\n</code></pre>\n<p>Then navigate your browser to <code>http://localhost:4000</code>. You should see the \"hello, world\" message we entered earlier:</p>\n<p><img src=\"/pie-website/assets/tutorial/demo.png\" width=\"800\"/></p>\n<p>Towards the top of the screen you will see a control panel for changing the view mode, language settings, and color contrast for the item. (This is a subset of the properties that can be set for the environment - a complete set will be coming in an upcoming version of the control panel.)</p>\n<p>The <code>pie serve</code> task enables <strong>Hot Module Replacement</strong> for your code. This means any changes you make in your Javascript code will be automatically updated in the page, you do not need to refresh the page or re-run the task. To try this out, open the <code>src/index.js</code> file and change the <code>hello world</code> message to something else - you will see this is immediately updated on the page.</p>\n<h3 id=\"adding-data-to-the-model\"><a href=\"#adding-data-to-the-model\" class=\"phenomic-HeadingAnchor\">#</a>Adding data to the model</h3>\n<p>First off, we will introduce logic so that our PIE manages state and provides access to its <code>model</code> and <code>session</code> properties:</p>\n<pre><code class=\"hljs language-javascript\">    <span class=\"hljs-keyword\">export</span> <span class=\"hljs-keyword\">default</span> <span class=\"hljs-class\"><span class=\"hljs-keyword\">class</span> <span class=\"hljs-title\">Toggle</span> <span class=\"hljs-keyword\">extends</span> <span class=\"hljs-title\">HTMLElement</span> </span>{\n      \n      <span class=\"hljs-keyword\">constructor</span>() {\n        <span class=\"hljs-keyword\">super</span>();\n        <span class=\"hljs-keyword\">this</span>._model = <span class=\"hljs-literal\">null</span>;\n        <span class=\"hljs-keyword\">this</span>._session = <span class=\"hljs-literal\">null</span>;\n      }\n\n      set model(m) {\n        <span class=\"hljs-keyword\">this</span>._model = m;\n        <span class=\"hljs-keyword\">this</span>._rerender();\n      }\n\n      set session(s) {\n        <span class=\"hljs-keyword\">this</span>._session = s;\n        <span class=\"hljs-keyword\">this</span>._rerender();\n      }\n\n      get session() {\n        <span class=\"hljs-keyword\">return</span> <span class=\"hljs-keyword\">this</span>._session;\n      }\n\n      _message() {\n        <span class=\"hljs-keyword\">return</span> <span class=\"hljs-keyword\">this</span>._model ? <span class=\"hljs-keyword\">this</span>._model.message : <span class=\"hljs-string\">'hello, world'</span>;\n      }\n\n      _rerender() {\n        <span class=\"hljs-keyword\">this</span>.innerHTML = <span class=\"hljs-string\">`&#x3C;div><span class=\"hljs-subst\">${<span class=\"hljs-keyword\">this</span>._message()}</span>&#x3C;/div>`</span>;\n      }\n\n      connectedCallback() {\n        <span class=\"hljs-keyword\">this</span>.dispatchEvent(<span class=\"hljs-keyword\">new</span> CustomEvent(<span class=\"hljs-string\">'pie.register'</span>, { <span class=\"hljs-attr\">bubbles</span>: <span class=\"hljs-literal\">true</span> }));\n        <span class=\"hljs-keyword\">this</span>._rerender();\n      }\n\n    }</code></pre>\n<p>There's also a bit of glue code in here so that our component registers itself with the rest of the PIE framework. As you can see, if there is a <code>message</code> property defined in the model it will be rendered into the markup. We'll also need to change the <code>docs/demo/config.json</code> file to include a custom message:</p>\n<pre><code class=\"hljs language-json\">    {\n      <span class=\"hljs-attr\">\"elements\"</span>: {\n        <span class=\"hljs-attr\">\"pie-toggle\"</span>: <span class=\"hljs-string\">\"../..\"</span>\n      },\n      <span class=\"hljs-attr\">\"models\"</span>: [\n        {\n          <span class=\"hljs-attr\">\"id\"</span>: <span class=\"hljs-string\">\"1\"</span>,\n          <span class=\"hljs-attr\">\"element\"</span>: <span class=\"hljs-string\">\"pie-toggle\"</span>,\n          <span class=\"hljs-attr\">\"message\"</span>: <span class=\"hljs-string\">\"hello, PIE\"</span>\n        }\n      ]\n    }</code></pre>\n<p>At this point we will also need a controller for our PIE. Create a <code>controller</code> directory in the project root and initialize it using <code>npm</code> with the name <code>pie-toggle-controller</code> and the entry point <code>src/index.js</code>:</p>\n<blockquote>\n<p>Note: the requirement to define an NPM package for the controller is being removed. This will be an optional feature. See Pielabs/pie-cli#85.</p>\n</blockquote>\n<pre><code class=\"hljs language-bash\">    mkdir controller\n    <span class=\"hljs-built_in\">cd</span> controller \n    npm init\n    mkdir src\n    <span class=\"hljs-built_in\">cd</span> src\n    touch index.js</code></pre>\n<p>Paste the following into the <code>controller/src/index.js</code> file:</p>\n<pre><code class=\"hljs language-javascript\">    <span class=\"hljs-keyword\">export</span> <span class=\"hljs-function\"><span class=\"hljs-keyword\">function</span> <span class=\"hljs-title\">outcome</span>(<span class=\"hljs-params\">question, session</span>) </span>{\n\n      <span class=\"hljs-keyword\">return</span> <span class=\"hljs-keyword\">new</span> <span class=\"hljs-built_in\">Promise</span>(<span class=\"hljs-function\">(<span class=\"hljs-params\">resolve</span>) =></span> {\n        resolve({});\n      });\n\n    }\n\n    <span class=\"hljs-keyword\">export</span> <span class=\"hljs-function\"><span class=\"hljs-keyword\">function</span> <span class=\"hljs-title\">model</span>(<span class=\"hljs-params\">question, session, env</span>) </span>{\n\n      <span class=\"hljs-keyword\">return</span> <span class=\"hljs-keyword\">new</span> <span class=\"hljs-built_in\">Promise</span>(<span class=\"hljs-function\">(<span class=\"hljs-params\">resolve</span>) =></span> {\n        resolve(question);\n      });\n\n    }</code></pre>\n<p>Now open <code>http://localhost:4000</code>, and you will see that the message has now been replaced with \"hello, PIE\".</p>\n<p><a href=\"https://github.com/PieLabs/pie-toggle/releases/tag/step-4\">See the code here</a></p>\n<h3 id=\"add-some-interactive-elements\"><a href=\"#add-some-interactive-elements\" class=\"phenomic-HeadingAnchor\">#</a>Add some interactive elements</h3>\n<p>At this point, it'll be useful to add some styling and interaction to our PIE. Start with adding the <code>less</code> module to NPM from the root directory of the project:</p>\n<pre><code class=\"hljs language-bash\">    npm install less --save</code></pre>\n<p>Then add the following to <code>src/index.less</code> so that we have some styling for our toggle:</p>\n<pre><code class=\"hljs language-css\">    <span class=\"hljs-selector-class\">.switch</span> {\n      <span class=\"hljs-attribute\">position</span>: relative;\n      <span class=\"hljs-attribute\">display</span>: inline-block;\n      <span class=\"hljs-attribute\">width</span>: <span class=\"hljs-number\">60px</span>;\n      <span class=\"hljs-attribute\">height</span>: <span class=\"hljs-number\">34px</span>;\n\n      input {\n        <span class=\"hljs-attribute\">display</span>:none;\n\n        &#x26;:checked + .slider {\n          <span class=\"hljs-attribute\">background-color</span>: <span class=\"hljs-number\">#2196F3</span>;\n\n          &#x26;:before {\n            <span class=\"hljs-attribute\">-webkit-transform</span>: <span class=\"hljs-built_in\">translateX</span>(26px);\n            <span class=\"hljs-attribute\">-ms-transform</span>: <span class=\"hljs-built_in\">translateX</span>(26px);\n            <span class=\"hljs-attribute\">transform</span>: <span class=\"hljs-built_in\">translateX</span>(26px);\n          }\n        }\n\n        &#x26;<span class=\"hljs-selector-pseudo\">:focus</span> + <span class=\"hljs-selector-class\">.slider</span> {\n          <span class=\"hljs-attribute\">box-shadow</span>: <span class=\"hljs-number\">0</span> <span class=\"hljs-number\">0</span> <span class=\"hljs-number\">1px</span> <span class=\"hljs-number\">#2196F3</span>;\n        }\n      }\n\n      <span class=\"hljs-selector-class\">.slider</span> {\n        <span class=\"hljs-attribute\">position</span>: absolute;\n        <span class=\"hljs-attribute\">cursor</span>: pointer;\n        <span class=\"hljs-attribute\">top</span>: <span class=\"hljs-number\">0</span>;\n        <span class=\"hljs-attribute\">left</span>: <span class=\"hljs-number\">0</span>;\n        <span class=\"hljs-attribute\">right</span>: <span class=\"hljs-number\">0</span>;\n        <span class=\"hljs-attribute\">bottom</span>: <span class=\"hljs-number\">0</span>;\n        <span class=\"hljs-attribute\">background-color</span>: <span class=\"hljs-number\">#ccc</span>;\n        <span class=\"hljs-attribute\">-webkit-transition</span>: .<span class=\"hljs-number\">4s</span>;\n        <span class=\"hljs-attribute\">transition</span>: .<span class=\"hljs-number\">4s</span>;\n\n        &#x26;:before {\n          <span class=\"hljs-attribute\">position</span>: absolute;\n          <span class=\"hljs-attribute\">content</span>: <span class=\"hljs-string\">\"\"</span>;\n          <span class=\"hljs-attribute\">height</span>: <span class=\"hljs-number\">26px</span>;\n          <span class=\"hljs-attribute\">width</span>: <span class=\"hljs-number\">26px</span>;\n          <span class=\"hljs-attribute\">left</span>: <span class=\"hljs-number\">4px</span>;\n          <span class=\"hljs-attribute\">bottom</span>: <span class=\"hljs-number\">4px</span>;\n          <span class=\"hljs-attribute\">background-color</span>: white;\n          <span class=\"hljs-attribute\">-webkit-transition</span>: .<span class=\"hljs-number\">4s</span>;\n          <span class=\"hljs-attribute\">transition</span>: .<span class=\"hljs-number\">4s</span>;\n        }\n\n        &#x26;<span class=\"hljs-selector-class\">.round</span> {\n          <span class=\"hljs-attribute\">border-radius</span>: <span class=\"hljs-number\">34px</span>;\n\n          &#x26;:before {\n            <span class=\"hljs-attribute\">border-radius</span>: <span class=\"hljs-number\">50%</span>;\n          }\n        }\n      }\n\n    }</code></pre>\n<p>After this we'll import the <code>index.less</code> in our <code>index.js</code> file, and add some markup to the <code>_rerender</code> function that displays the switch:</p>\n<pre><code class=\"hljs language-javascript\">    <span class=\"hljs-built_in\">require</span>(<span class=\"hljs-string\">'./index.less'</span>);\n\n    <span class=\"hljs-keyword\">export</span> <span class=\"hljs-keyword\">default</span> <span class=\"hljs-class\"><span class=\"hljs-keyword\">class</span> <span class=\"hljs-title\">Toggle</span> <span class=\"hljs-keyword\">extends</span> <span class=\"hljs-title\">HTMLElement</span> </span>{\n      \n      <span class=\"hljs-keyword\">constructor</span>() {\n        <span class=\"hljs-keyword\">super</span>();\n        <span class=\"hljs-keyword\">this</span>._model = <span class=\"hljs-literal\">null</span>;\n        <span class=\"hljs-keyword\">this</span>._session = <span class=\"hljs-literal\">null</span>;\n      }\n\n      set model(m) {\n        <span class=\"hljs-keyword\">this</span>._model = m;\n        <span class=\"hljs-keyword\">this</span>._rerender();\n      }\n\n      set session(s) {\n        <span class=\"hljs-keyword\">this</span>._session = s;\n        <span class=\"hljs-keyword\">if</span> (!<span class=\"hljs-keyword\">this</span>._session.answer) {\n          <span class=\"hljs-keyword\">this</span>._session.answer = <span class=\"hljs-literal\">false</span>;\n        }\n        <span class=\"hljs-keyword\">this</span>._rerender();\n      }\n\n      get session() {\n        <span class=\"hljs-keyword\">return</span> <span class=\"hljs-keyword\">this</span>._session;\n      }\n\n      _rerender() {\n        <span class=\"hljs-keyword\">let</span> checked = <span class=\"hljs-keyword\">this</span>._session ? <span class=\"hljs-keyword\">this</span>._session.answer : <span class=\"hljs-literal\">false</span>;\n\n\n        <span class=\"hljs-keyword\">this</span>.innerHTML = <span class=\"hljs-string\">`\n        &#x3C;label class=\"switch\">\n          &#x3C;input type=\"checkbox\" <span class=\"hljs-subst\">${checked ? <span class=\"hljs-string\">'checked=\"\"'</span> : <span class=\"hljs-string\">''</span>}</span>>\n          &#x3C;div class=\"slider round\">&#x3C;/div>\n        &#x3C;/label>`</span>;\n        \n        <span class=\"hljs-keyword\">this</span>.querySelector(<span class=\"hljs-string\">'input'</span>).addEventListener(<span class=\"hljs-string\">'change'</span>, (e) => {\n          <span class=\"hljs-keyword\">this</span>._session.answer = e.target.checked;\n        });\n      }\n\n      connectedCallback() {\n        <span class=\"hljs-keyword\">this</span>.dispatchEvent(<span class=\"hljs-keyword\">new</span> CustomEvent(<span class=\"hljs-string\">'pie.register'</span>, { <span class=\"hljs-attr\">bubbles</span>: <span class=\"hljs-literal\">true</span> }));\n        <span class=\"hljs-keyword\">this</span>._rerender();\n      }\n\n    }</code></pre>\n<p>Note also that the <code>addEventListener</code> for changes on the <code>input</code> element will update the PIE's <code>_session</code> to reflect the user's changes. Open <code>http://localhost:4000</code>, and you should now see a toggle component: </p>\n<p><img src=\"/pie-website/assets/tutorial/toggle.png\" width=\"800\"/></p>\n<p><a href=\"https://github.com/PieLabs/pie-toggle/releases/tag/step-5\">See the code here</a></p>\n<h3 id=\"provide-scoring-from-the-controller\"><a href=\"#provide-scoring-from-the-controller\" class=\"phenomic-HeadingAnchor\">#</a>Provide scoring from the controller</h3>\n<p>Replace the <code>outcome</code> function in <code>controller/src/index.js</code> with the following:</p>\n<pre><code class=\"hljs language-javascript\">  <span class=\"hljs-keyword\">export</span> <span class=\"hljs-function\"><span class=\"hljs-keyword\">function</span> <span class=\"hljs-title\">outcome</span>(<span class=\"hljs-params\">question, session</span>) </span>{\n\n    <span class=\"hljs-keyword\">return</span> <span class=\"hljs-keyword\">new</span> <span class=\"hljs-built_in\">Promise</span>(<span class=\"hljs-function\">(<span class=\"hljs-params\">resolve</span>) =></span> {\n      <span class=\"hljs-keyword\">var</span> correct = (session.answer === question.answer);\n      resolve({\n        <span class=\"hljs-attr\">score</span>: {\n          <span class=\"hljs-attr\">scaled</span>: correct ? <span class=\"hljs-number\">1</span> : <span class=\"hljs-number\">0</span>\n        }\n      });\n    });\n\n  }</code></pre>\n<p>Since this controller logic expects an <code>answer</code> field in the question to specify the correct response, we must also add this information to the model in <code>docs/demo/config.json</code>:</p>\n<pre><code class=\"hljs language-json\">    {\n      <span class=\"hljs-attr\">\"elements\"</span>: {\n        <span class=\"hljs-attr\">\"pie-toggle\"</span>: <span class=\"hljs-string\">\"../..\"</span>\n      },\n      <span class=\"hljs-attr\">\"models\"</span>: [\n        {\n          <span class=\"hljs-attr\">\"id\"</span>: <span class=\"hljs-string\">\"1\"</span>,\n          <span class=\"hljs-attr\">\"element\"</span>: <span class=\"hljs-string\">\"pie-toggle\"</span>,\n          <span class=\"hljs-attr\">\"answer\"</span>: <span class=\"hljs-literal\">true</span>\n        }\n      ]\n    }</code></pre>\n<p>The <code>pie-controller</code> will use the <code>score</code> information to set the score in the demo. On the page at <code>http://localhost:4000</code>, click the toggle, change the view mode to 'evaluate', and you will see the score presented in the UI:</p>\n<p><img src=\"/pie-website/assets/tutorial/score.png\" width=\"800\"/></p>\n<p><a href=\"https://github.com/PieLabs/pie-toggle/releases/tag/step-6\">See the code here</a></p>\n<h3 id=\"provide-feedback-from-the-controller\"><a href=\"#provide-feedback-from-the-controller\" class=\"phenomic-HeadingAnchor\">#</a>Provide feedback from the controller</h3>\n<p>We can also use the <code>model</code> function of the controller to provide additional data related to the state of the session as it relates to the question.</p>\n<p>Replace the <code>model</code> function in <code>controller/src/index.js</code> with the following:</p>\n<pre><code class=\"hljs language-javascript\">    <span class=\"hljs-keyword\">export</span> <span class=\"hljs-function\"><span class=\"hljs-keyword\">function</span> <span class=\"hljs-title\">model</span>(<span class=\"hljs-params\">question, session, env</span>) </span>{\n\n      <span class=\"hljs-keyword\">return</span> <span class=\"hljs-keyword\">new</span> <span class=\"hljs-built_in\">Promise</span>(<span class=\"hljs-function\">(<span class=\"hljs-params\">resolve</span>) =></span> {\n        <span class=\"hljs-keyword\">var</span> response = {};\n        <span class=\"hljs-keyword\">if</span> (env.mode === <span class=\"hljs-string\">'evaluate'</span>) {\n          <span class=\"hljs-keyword\">let</span> correct = session &#x26;&#x26; session.answer &#x26;&#x26; session.answer === question.answer;\n          response.result = correct;\n          response.feedback = correct ? question.feedback.correct : question.feedback.incorrect;\n        }\n        resolve(response);\n      });\n\n    }</code></pre>\n<p>As you can see, the model function now looks to see if the view mode is set to <code>evalate</code>, examines the session data to see if the question has been answered correctly, and provides feedback accordingly. In order to provide custom feedback from the question data, we add the corresponding <code>feedback</code> field to the model defined in <code>docs/demo/config.json</code>:</p>\n<pre><code class=\"hljs language-json\">    {\n      <span class=\"hljs-attr\">\"elements\"</span>: {\n        <span class=\"hljs-attr\">\"pie-toggle\"</span>: <span class=\"hljs-string\">\"../..\"</span>\n      },\n      <span class=\"hljs-attr\">\"models\"</span>: [\n        {\n          <span class=\"hljs-attr\">\"id\"</span>: <span class=\"hljs-string\">\"1\"</span>,\n          <span class=\"hljs-attr\">\"element\"</span>: <span class=\"hljs-string\">\"pie-toggle\"</span>,\n          <span class=\"hljs-attr\">\"answer\"</span>: <span class=\"hljs-literal\">true</span>,\n          <span class=\"hljs-attr\">\"feedback\"</span>: {\n            <span class=\"hljs-attr\">\"correct\"</span>: <span class=\"hljs-string\">\"Correct!\"</span>,\n            <span class=\"hljs-attr\">\"incorrect\"</span>: <span class=\"hljs-string\">\"Incorrect!\"</span>\n          }\n        }\n      ]\n    }</code></pre>\n<p>Now that the model contains a <code>feedback</code> field, we will need to update the <code>src/index.js</code> that renders the PIE in the UI to display this field to the user. Modify the <code>_rerender</code> function to look like this:</p>\n<pre><code class=\"hljs language-javascript\">    _rerender() {\n      <span class=\"hljs-keyword\">let</span> feedback = (model &#x26;&#x26; model.feedback) ? <span class=\"hljs-string\">`&#x3C;div class=\"feedback\"><span class=\"hljs-subst\">${model.feedback}</span>&#x3C;/div>`</span> : <span class=\"hljs-string\">''</span>;\n\n      <span class=\"hljs-keyword\">let</span> checked = <span class=\"hljs-keyword\">this</span>._session ? <span class=\"hljs-keyword\">this</span>._session.answer : <span class=\"hljs-literal\">false</span>;\n\n      <span class=\"hljs-keyword\">this</span>.innerHTML = <span class=\"hljs-string\">`\n        &#x3C;label class=\"switch\">\n          &#x3C;input type=\"checkbox\" <span class=\"hljs-subst\">${checked ? <span class=\"hljs-string\">'checked=\"\"'</span> : <span class=\"hljs-string\">''</span>}</span>>\n          &#x3C;div class=\"slider round\">&#x3C;/div>\n        &#x3C;/label>\n        <span class=\"hljs-subst\">${feedback}</span>`</span>;\n\n      <span class=\"hljs-keyword\">this</span>.querySelector(<span class=\"hljs-string\">'input'</span>).addEventListener(<span class=\"hljs-string\">'change'</span>, (e) => {\n        <span class=\"hljs-keyword\">this</span>._session.answer = e.target.checked;\n      });\n    }</code></pre>\n<p>On the page <code>http://localhost:4000</code>, click the toggle, change the view mode to 'evaluate', and you will see the feedback presented in the UI:</p>\n<p><img src=\"/pie-website/assets/tutorial/feedback.png\" width=\"800\"/></p>\n<p><a href=\"https://github.com/PieLabs/pie-toggle/releases/tag/step-7\">See the code here</a></p>\n<h3 id=\"debugging\"><a href=\"#debugging\" class=\"phenomic-HeadingAnchor\">#</a>Debugging</h3>\n<p>When running <code>pie serve</code> The Element and Controller code for your PIE is transpiled and added to a file called <code>pie-item.js</code>. You can inspect this file with your browser debugger.</p>\n<blockquote>\n<p>Coming Soon: The <code>pie-item.js</code> file is transpiled to ES5 from your sources. Source maps feature will be added to <code>pie serve</code> task, so your ES6 files can be inspected directly in a compatible debugger. </p>\n</blockquote>\n","__filename":"docs/developing/tutorial/development-tutorial.md","__url":"/docs/developing/tutorial/development-tutorial/","__resourceUrl":"/docs/developing/tutorial/development-tutorial/index.html","__dataUrl":"/docs/developing/tutorial/development-tutorial/index.html.4406048a171b407e8928655da54440eb.json"}